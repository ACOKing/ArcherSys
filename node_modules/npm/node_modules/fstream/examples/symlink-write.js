<<<<<<< HEAD
<<<<<<< HEAD
var fstream = require("../fstream.js")
  , closed = false

fstream
  .Writer({ path: "path/to/symlink"
          , linkpath: "./file"
          , isSymbolicLink: true
          , mode: "0755" // octal strings supported
          })
  .on("close", function () {
    closed = true
    var fs = require("fs")
    var s = fs.lstatSync("path/to/symlink")
    var isSym = s.isSymbolicLink()
    console.log((isSym?"":"not ") +"ok 1 should be symlink")
    var t = fs.readlinkSync("path/to/symlink")
    var isTarget = t === "./file"
    console.log((isTarget?"":"not ") +"ok 2 should link to ./file")
  })
  .end()

process.on("exit", function () {
  console.log((closed?"":"not ")+"ok 3 should be closed")
})
=======
var fstream = require("../fstream.js")
  , closed = false

fstream
  .Writer({ path: "path/to/symlink"
          , linkpath: "./file"
          , isSymbolicLink: true
          , mode: "0755" // octal strings supported
          })
  .on("close", function () {
    closed = true
    var fs = require("fs")
    var s = fs.lstatSync("path/to/symlink")
    var isSym = s.isSymbolicLink()
    console.log((isSym?"":"not ") +"ok 1 should be symlink")
    var t = fs.readlinkSync("path/to/symlink")
    var isTarget = t === "./file"
    console.log((isTarget?"":"not ") +"ok 2 should link to ./file")
  })
  .end()

process.on("exit", function () {
  console.log((closed?"":"not ")+"ok 3 should be closed")
})
>>>>>>> b875702c9c06ab5012e52ff4337439b03918f453
=======
var fstream = require("../fstream.js")
  , closed = false

fstream
  .Writer({ path: "path/to/symlink"
          , linkpath: "./file"
          , isSymbolicLink: true
          , mode: "0755" // octal strings supported
          })
  .on("close", function () {
    closed = true
    var fs = require("fs")
    var s = fs.lstatSync("path/to/symlink")
    var isSym = s.isSymbolicLink()
    console.log((isSym?"":"not ") +"ok 1 should be symlink")
    var t = fs.readlinkSync("path/to/symlink")
    var isTarget = t === "./file"
    console.log((isTarget?"":"not ") +"ok 2 should link to ./file")
  })
  .end()

process.on("exit", function () {
  console.log((closed?"":"not ")+"ok 3 should be closed")
})
>>>>>>> b875702c9c06ab5012e52ff4337439b03918f453
